{"is_source_file": true, "format": "JavaScript", "description": "This file provides utility functions for managing company reviews stored in localStorage. It includes functions for normalizing company keys, adding, deleting, updating reviews, computing review averages, and retrieving reviews by owner. The code handles review data structures, localStorage interactions, and dispatches custom events on changes.", "external_files": ["localStorage"], "external_methods": [], "published": ["normalizeCompanyKey", "listCompanyReviews", "addReview", "deleteReview", "updateReview", "computeAverages", "listMyReviews"], "classes": [], "methods": [{"name": "normalizeCompanyKey(companyNameOrId)", "description": "Normalizes a company name or ID into a URL and storage-friendly key.", "scope": "", "scopeKind": ""}, {"name": "safeParse(json, fallback)", "description": "Parses JSON safely with fallback.", "scope": "", "scopeKind": ""}, {"name": "loadAll()", "description": "Loads all reviews data from localStorage.", "scope": "", "scopeKind": ""}, {"name": "saveAll(obj)", "description": "Saves the entire reviews data object to localStorage.", "scope": "", "scopeKind": ""}, {"name": "uid()", "description": "Generates a unique identifier based on timestamp and random string.", "scope": "", "scopeKind": ""}, {"name": "getLocalOwnerId()", "description": "Retrieves or generates a persistent local owner ID for review ownership.", "scope": "", "scopeKind": ""}, {"name": "listCompanyReviews(companyNameOrId)", "description": "Returns an array of reviews for a specific company, sorted recent first.", "scope": "", "scopeKind": ""}, {"name": "addReview(company, review)", "description": "Adds a new review for a specified company, creating a normalized review object.", "scope": "", "scopeKind": ""}, {"name": "deleteReview(id)", "description": "Deletes a review by ID across all companies.", "scope": "", "scopeKind": ""}, {"name": "updateReview(id, patch)", "description": "Updates a review by ID with a specified patch object.", "scope": "", "scopeKind": ""}, {"name": "computeAverages(reviews)", "description": "Calculates average ratings and counts from a list of reviews.", "scope": "", "scopeKind": ""}, {"name": "listMyReviews()", "description": "Returns all reviews authored by the current owner ID.", "scope": "", "scopeKind": ""}, {"name": "round1(n)", "description": "Rounds a number to one decimal place.", "scope": "", "scopeKind": ""}, {"name": "toRating(n)", "description": "Converts a number to an integer rating between 1 and 5.", "scope": "", "scopeKind": ""}, {"name": "normalizeReview(r)", "description": "Creates a normalized review object with proper defaults.", "scope": "", "scopeKind": ""}, {"name": "validateReview(r)", "description": "Validates the fields of a review object.", "scope": "", "scopeKind": ""}, {"name": "dispatchReviewsChange(action, companyKey, id, review)", "description": "Dispatches a custom event to signal review changes.", "scope": "", "scopeKind": ""}], "calls": ["localStorage.getItem", "localStorage.setItem", "JSON.parse", "JSON.stringify", "window.dispatchEvent", "new CustomEvent"], "search-terms": ["localStorage-backed reviews", "company review utilities", "normalize company key", "CRUD reviews", "compute review averages", "owner ID management", "review list", "review update", "review delete"], "state": 2, "file_id": 38, "knowledge_revision": 125, "git_revision": "", "ctags": [{"_type": "tag", "name": "OWNER_KEY", "path": "/home/kavia/workspace/code-generation/job-listings-browser-50480-50489/job_board_frontend/src/utils/reviews.js", "pattern": "/^const OWNER_KEY = 'jb_owner_id_v1';$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "STORAGE_KEY", "path": "/home/kavia/workspace/code-generation/job-listings-browser-50480-50489/job_board_frontend/src/utils/reviews.js", "pattern": "/^const STORAGE_KEY = 'jb_company_reviews_v1';$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "addReview", "path": "/home/kavia/workspace/code-generation/job-listings-browser-50480-50489/job_board_frontend/src/utils/reviews.js", "pattern": "/^export function addReview(company, review) {$/", "language": "JavaScript", "kind": "function", "signature": "(company, review)"}, {"_type": "tag", "name": "computeAverages", "path": "/home/kavia/workspace/code-generation/job-listings-browser-50480-50489/job_board_frontend/src/utils/reviews.js", "pattern": "/^export function computeAverages(reviews) {$/", "language": "JavaScript", "kind": "function", "signature": "(reviews)"}, {"_type": "tag", "name": "deleteReview", "path": "/home/kavia/workspace/code-generation/job-listings-browser-50480-50489/job_board_frontend/src/utils/reviews.js", "pattern": "/^export function deleteReview(id) {$/", "language": "JavaScript", "kind": "function", "signature": "(id)"}, {"_type": "tag", "name": "dispatchReviewsChange", "path": "/home/kavia/workspace/code-generation/job-listings-browser-50480-50489/job_board_frontend/src/utils/reviews.js", "pattern": "/^function dispatchReviewsChange(action, companyKey, id, review) {$/", "language": "JavaScript", "kind": "function", "signature": "(action, companyKey, id, review)"}, {"_type": "tag", "name": "getLocalOwnerId", "path": "/home/kavia/workspace/code-generation/job-listings-browser-50480-50489/job_board_frontend/src/utils/reviews.js", "pattern": "/^export function getLocalOwnerId() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "listCompanyReviews", "path": "/home/kavia/workspace/code-generation/job-listings-browser-50480-50489/job_board_frontend/src/utils/reviews.js", "pattern": "/^export function listCompanyReviews(companyNameOrId) {$/", "language": "JavaScript", "kind": "function", "signature": "(companyNameOrId)"}, {"_type": "tag", "name": "listMyReviews", "path": "/home/kavia/workspace/code-generation/job-listings-browser-50480-50489/job_board_frontend/src/utils/reviews.js", "pattern": "/^export function listMyReviews() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "loadAll", "path": "/home/kavia/workspace/code-generation/job-listings-browser-50480-50489/job_board_frontend/src/utils/reviews.js", "pattern": "/^function loadAll() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "normalizeCompanyKey", "path": "/home/kavia/workspace/code-generation/job-listings-browser-50480-50489/job_board_frontend/src/utils/reviews.js", "pattern": "/^export function normalizeCompanyKey(companyNameOrId) {$/", "language": "JavaScript", "kind": "function", "signature": "(companyNameOrId)"}, {"_type": "tag", "name": "normalizeReview", "path": "/home/kavia/workspace/code-generation/job-listings-browser-50480-50489/job_board_frontend/src/utils/reviews.js", "pattern": "/^function normalizeReview(r) {$/", "language": "JavaScript", "kind": "function", "signature": "(r)"}, {"_type": "tag", "name": "round1", "path": "/home/kavia/workspace/code-generation/job-listings-browser-50480-50489/job_board_frontend/src/utils/reviews.js", "pattern": "/^function round1(n) {$/", "language": "JavaScript", "kind": "function", "signature": "(n)"}, {"_type": "tag", "name": "safeParse", "path": "/home/kavia/workspace/code-generation/job-listings-browser-50480-50489/job_board_frontend/src/utils/reviews.js", "pattern": "/^function safeParse(json, fallback) {$/", "language": "JavaScript", "kind": "function", "signature": "(json, fallback)"}, {"_type": "tag", "name": "saveAll", "path": "/home/kavia/workspace/code-generation/job-listings-browser-50480-50489/job_board_frontend/src/utils/reviews.js", "pattern": "/^function saveAll(obj) {$/", "language": "JavaScript", "kind": "function", "signature": "(obj)"}, {"_type": "tag", "name": "toRating", "path": "/home/kavia/workspace/code-generation/job-listings-browser-50480-50489/job_board_frontend/src/utils/reviews.js", "pattern": "/^function toRating(n) {$/", "language": "JavaScript", "kind": "function", "signature": "(n)"}, {"_type": "tag", "name": "uid", "path": "/home/kavia/workspace/code-generation/job-listings-browser-50480-50489/job_board_frontend/src/utils/reviews.js", "pattern": "/^function uid() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "updateReview", "path": "/home/kavia/workspace/code-generation/job-listings-browser-50480-50489/job_board_frontend/src/utils/reviews.js", "pattern": "/^export function updateReview(id, patch) {$/", "language": "JavaScript", "kind": "function", "signature": "(id, patch)"}, {"_type": "tag", "name": "validateReview", "path": "/home/kavia/workspace/code-generation/job-listings-browser-50480-50489/job_board_frontend/src/utils/reviews.js", "pattern": "/^function validateReview(r) {$/", "language": "JavaScript", "kind": "function", "signature": "(r)"}], "hash": "079dada523f50b6e9c9e60143bcc03f6", "format-version": 4, "code-base-name": "job_board_frontend", "filename": "job_board_frontend/src/utils/reviews.js", "revision_history": [{"125": ""}]}