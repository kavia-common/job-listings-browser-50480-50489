{"is_source_file": true, "format": "JavaScript", "description": "This file provides utility functions for managing alerts, notifications, and matching jobs to alert rules in a client-side job listings application. It includes functions for creating, updating, deleting, and listing alerts, recording notifications, handling push permissions, and matching job data against alert rules with support for user interactions.", "external_files": [], "external_methods": ["JSON.parse", "localStorage.getItem", "localStorage.setItem", "Notification.requestPermission", "Notification.permission", "window.dispatchEvent", "window.dispatchEvent(new CustomEvent(...))"], "published": ["listAlerts", "createAlert", "updateAlert", "deleteAlert", "toggleAlert", "listNotifications", "recordNotification", "getPushPermissionState", "requestPushPermission", "matchJobsToAlerts"], "classes": [], "methods": [{"name": "listAlerts()", "description": "Returns an array of normalized alert rules stored in localStorage.", "scope": "", "scopeKind": ""}, {"name": "createAlert(rule)", "description": "Creates a new alert rule, assigns a unique ID, stores it, and dispatches a change event.", "scope": "", "scopeKind": ""}, {"name": "updateAlert(id, patch)", "description": "Updates an existing alert rule identified by ID with given patches, updates storage, and dispatches a change event.", "scope": "", "scopeKind": ""}, {"name": "deleteAlert(id)", "description": "Deletes an alert rule by ID and dispatches a change event if deletion occurs.", "scope": "", "scopeKind": ""}, {"name": "toggleAlert(id, enabled)", "description": "Toggles or sets the enabled status of an alert rule by ID.", "scope": "", "scopeKind": ""}, {"name": "listNotifications(limit = 50)", "description": "Retrieves a list of recent sent notifications, sorted descending by time.", "scope": "", "scopeKind": ""}, {"name": "recordNotification(event)", "description": "Records a notification event, deduplicates by key, and dispatches notification event.", "scope": "", "scopeKind": ""}, {"name": "getPushPermissionState()", "description": "Returns current browser notification permission state.", "scope": "", "scopeKind": ""}, {"name": "requestPushPermission()", "description": "Requests permission for browser notifications from the user.", "scope": "", "scopeKind": ""}, {"name": "matchJobsToAlerts(jobs, { notify = true, onInAppNotify, onPushNotify } = {})", "description": "Matches a list of jobs against active alert rules, optionally sends notifications and in-app messages, and returns matched results.", "scope": "", "scopeKind": ""}, {"name": "buildMessage(rule, job)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "buildRuleName({ keywords, company })", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "dispatchAlertsChange(action, id, rule)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "dispatchAlertsNotif(notif)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "fieldIncludes(hay, needle)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "normalizeNotif(e)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "normalizeRule(r)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "nowIso()", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "ruleMatchesJob(rule, job)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "safeParse(json, fallback)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "tagsInclude(job, word)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "uid()", "scope": "", "scopeKind": "", "description": "unavailable"}], "calls": ["JSON.parse", "localStorage.getItem", "localStorage.setItem", "Notification.requestPermission", "window.dispatchEvent", "new Notification(...)", "listAlerts()", "listNotifications()", "normalizeRule(...)", "ruleMatchesJob(...)", "buildMessage(...)", "normalizeNotif(...)"], "search-terms": ["alerts", "notifications", "job matching", "localStorage", "push permission", "alert rules", "matching jobs"], "state": 2, "file_id": 35, "knowledge_revision": 116, "git_revision": "be81959b2b99d7d662acb032c5c74c7972eaba85", "ctags": [{"_type": "tag", "name": "ALERTS_KEY", "path": "/home/kavia/workspace/code-generation/job-listings-browser-50480-50489/job_board_frontend/src/utils/alerts.js", "pattern": "/^const ALERTS_KEY = 'jb_alerts_rules_v1';$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "ALERTS_NOTIFS_KEY", "path": "/home/kavia/workspace/code-generation/job-listings-browser-50480-50489/job_board_frontend/src/utils/alerts.js", "pattern": "/^const ALERTS_NOTIFS_KEY = 'jb_alerts_notifications_v1';$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "buildMessage", "path": "/home/kavia/workspace/code-generation/job-listings-browser-50480-50489/job_board_frontend/src/utils/alerts.js", "pattern": "/^function buildMessage(rule, job) {$/", "language": "JavaScript", "kind": "function", "signature": "(rule, job)"}, {"_type": "tag", "name": "buildRuleName", "path": "/home/kavia/workspace/code-generation/job-listings-browser-50480-50489/job_board_frontend/src/utils/alerts.js", "pattern": "/^function buildRuleName({ keywords, company }) {$/", "language": "JavaScript", "kind": "function", "signature": "({ keywords, company })"}, {"_type": "tag", "name": "channels", "path": "/home/kavia/workspace/code-generation/job-listings-browser-50480-50489/job_board_frontend/src/utils/alerts.js", "pattern": "/^  const channels = {$/", "language": "JavaScript", "kind": "class", "scope": "normalizeRule", "scopeKind": "class"}, {"_type": "tag", "name": "createAlert", "path": "/home/kavia/workspace/code-generation/job-listings-browser-50480-50489/job_board_frontend/src/utils/alerts.js", "pattern": "/^export function createAlert(rule) {$/", "language": "JavaScript", "kind": "function", "signature": "(rule)"}, {"_type": "tag", "name": "deleteAlert", "path": "/home/kavia/workspace/code-generation/job-listings-browser-50480-50489/job_board_frontend/src/utils/alerts.js", "pattern": "/^export function deleteAlert(id) {$/", "language": "JavaScript", "kind": "function", "signature": "(id)"}, {"_type": "tag", "name": "dispatchAlertsChange", "path": "/home/kavia/workspace/code-generation/job-listings-browser-50480-50489/job_board_frontend/src/utils/alerts.js", "pattern": "/^function dispatchAlertsChange(action, id, rule) {$/", "language": "JavaScript", "kind": "function", "signature": "(action, id, rule)"}, {"_type": "tag", "name": "dispatchAlertsNotif", "path": "/home/kavia/workspace/code-generation/job-listings-browser-50480-50489/job_board_frontend/src/utils/alerts.js", "pattern": "/^function dispatchAlertsNotif(notif) {$/", "language": "JavaScript", "kind": "function", "signature": "(notif)"}, {"_type": "tag", "name": "email", "path": "/home/kavia/workspace/code-generation/job-listings-browser-50480-50489/job_board_frontend/src/utils/alerts.js", "pattern": "/^    email: !!(r?.channels?.email || r?.email),$/", "language": "JavaScript", "kind": "property", "scope": "normalizeRule.channels", "scopeKind": "class"}, {"_type": "tag", "name": "fieldIncludes", "path": "/home/kavia/workspace/code-generation/job-listings-browser-50480-50489/job_board_frontend/src/utils/alerts.js", "pattern": "/^function fieldIncludes(hay, needle) {$/", "language": "JavaScript", "kind": "function", "signature": "(hay, needle)"}, {"_type": "tag", "name": "getPushPermissionState", "path": "/home/kavia/workspace/code-generation/job-listings-browser-50480-50489/job_board_frontend/src/utils/alerts.js", "pattern": "/^export function getPushPermissionState() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "id", "path": "/home/kavia/workspace/code-generation/job-listings-browser-50480-50489/job_board_frontend/src/utils/alerts.js", "pattern": "/^        id: uid(),$/", "language": "JavaScript", "kind": "property", "scope": "matchJobsToAlerts.record", "scopeKind": "class"}, {"_type": "tag", "name": "jobId", "path": "/home/kavia/workspace/code-generation/job-listings-browser-50480-50489/job_board_frontend/src/utils/alerts.js", "pattern": "/^        jobId,$/", "language": "JavaScript", "kind": "field", "scope": "matchJobsToAlerts.record", "scopeKind": "class"}, {"_type": "tag", "name": "listAlerts", "path": "/home/kavia/workspace/code-generation/job-listings-browser-50480-50489/job_board_frontend/src/utils/alerts.js", "pattern": "/^export function listAlerts() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "listNotifications", "path": "/home/kavia/workspace/code-generation/job-listings-browser-50480-50489/job_board_frontend/src/utils/alerts.js", "pattern": "/^export function listNotifications(limit = 50) {$/", "language": "JavaScript", "kind": "function", "signature": "(limit = 50)"}, {"_type": "tag", "name": "matchJobsToAlerts", "path": "/home/kavia/workspace/code-generation/job-listings-browser-50480-50489/job_board_frontend/src/utils/alerts.js", "pattern": "/^export function matchJobsToAlerts(jobs, { notify = true, onInAppNotify, onPushNotify } = {}) {$/", "language": "JavaScript", "kind": "function", "signature": "(jobs, { notify = true, onInAppNotify, onPushNotify } = {})"}, {"_type": "tag", "name": "normalizeNotif", "path": "/home/kavia/workspace/code-generation/job-listings-browser-50480-50489/job_board_frontend/src/utils/alerts.js", "pattern": "/^function normalizeNotif(e) {$/", "language": "JavaScript", "kind": "function", "signature": "(e)"}, {"_type": "tag", "name": "normalizeRule", "path": "/home/kavia/workspace/code-generation/job-listings-browser-50480-50489/job_board_frontend/src/utils/alerts.js", "pattern": "/^function normalizeRule(r) {$/", "language": "JavaScript", "kind": "function", "signature": "(r)"}, {"_type": "tag", "name": "nowIso", "path": "/home/kavia/workspace/code-generation/job-listings-browser-50480-50489/job_board_frontend/src/utils/alerts.js", "pattern": "/^function nowIso() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "push", "path": "/home/kavia/workspace/code-generation/job-listings-browser-50480-50489/job_board_frontend/src/utils/alerts.js", "pattern": "/^    push: !!(r?.channels?.push),$/", "language": "JavaScript", "kind": "property", "scope": "normalizeRule.channels", "scopeKind": "class"}, {"_type": "tag", "name": "record", "path": "/home/kavia/workspace/code-generation/job-listings-browser-50480-50489/job_board_frontend/src/utils/alerts.js", "pattern": "/^      const record = {$/", "language": "JavaScript", "kind": "class", "scope": "matchJobsToAlerts", "scopeKind": "class"}, {"_type": "tag", "name": "recordNotification", "path": "/home/kavia/workspace/code-generation/job-listings-browser-50480-50489/job_board_frontend/src/utils/alerts.js", "pattern": "/^export function recordNotification(event) {$/", "language": "JavaScript", "kind": "function", "signature": "(event)"}, {"_type": "tag", "name": "requestPushPermission", "path": "/home/kavia/workspace/code-generation/job-listings-browser-50480-50489/job_board_frontend/src/utils/alerts.js", "pattern": "/^export async function requestPushPermission() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "ruleId", "path": "/home/kavia/workspace/code-generation/job-listings-browser-50480-50489/job_board_frontend/src/utils/alerts.js", "pattern": "/^        ruleId: rule.id,$/", "language": "JavaScript", "kind": "property", "scope": "matchJobsToAlerts.record", "scopeKind": "class"}, {"_type": "tag", "name": "ruleMatchesJob", "path": "/home/kavia/workspace/code-generation/job-listings-browser-50480-50489/job_board_frontend/src/utils/alerts.js", "pattern": "/^function ruleMatchesJob(rule, job) {$/", "language": "JavaScript", "kind": "function", "signature": "(rule, job)"}, {"_type": "tag", "name": "safeParse", "path": "/home/kavia/workspace/code-generation/job-listings-browser-50480-50489/job_board_frontend/src/utils/alerts.js", "pattern": "/^function safeParse(json, fallback) {$/", "language": "JavaScript", "kind": "function", "signature": "(json, fallback)"}, {"_type": "tag", "name": "tagsInclude", "path": "/home/kavia/workspace/code-generation/job-listings-browser-50480-50489/job_board_frontend/src/utils/alerts.js", "pattern": "/^function tagsInclude(job, word) {$/", "language": "JavaScript", "kind": "function", "signature": "(job, word)"}, {"_type": "tag", "name": "toggleAlert", "path": "/home/kavia/workspace/code-generation/job-listings-browser-50480-50489/job_board_frontend/src/utils/alerts.js", "pattern": "/^export function toggleAlert(id, enabled) {$/", "language": "JavaScript", "kind": "function", "signature": "(id, enabled)"}, {"_type": "tag", "name": "uid", "path": "/home/kavia/workspace/code-generation/job-listings-browser-50480-50489/job_board_frontend/src/utils/alerts.js", "pattern": "/^function uid() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "updateAlert", "path": "/home/kavia/workspace/code-generation/job-listings-browser-50480-50489/job_board_frontend/src/utils/alerts.js", "pattern": "/^export function updateAlert(id, patch) {$/", "language": "JavaScript", "kind": "function", "signature": "(id, patch)"}], "hash": "201e3ac274c70acae78a8803cdbefc3c", "format-version": 4, "code-base-name": "job_board_frontend", "filename": "job_board_frontend/src/utils/alerts.js", "fields": [{"name": "email: !!(r?.channels?.email || r?.email),", "scope": "normalizeRule.channels", "scopeKind": "class", "description": "unavailable"}, {"name": "id: uid(),", "scope": "matchJobsToAlerts.record", "scopeKind": "class", "description": "unavailable"}, {"name": "jobId,", "scope": "matchJobsToAlerts.record", "scopeKind": "class", "description": "unavailable"}, {"name": "push: !!(r?.channels?.push),", "scope": "normalizeRule.channels", "scopeKind": "class", "description": "unavailable"}, {"name": "ruleId: rule.id,", "scope": "matchJobsToAlerts.record", "scopeKind": "class", "description": "unavailable"}], "revision_history": [{"116": "be81959b2b99d7d662acb032c5c74c7972eaba85"}]}